"use strict";(self.webpackChunktea_angular=self.webpackChunktea_angular||[]).push([[294],{4294:(D,c,l)=>{l.r(c),l.d(c,{OrderModule:()=>U});var m=l(6895),d=l(646),i=l(433),_=l(2340),e=l(8256),x=l(529);let f=(()=>{class t{constructor(u){this.http=u}order(u){return this.http.post(_.N.apiURL+"/order-tea",u)}}return t.\u0275fac=function(u){return new(u||t)(e.LFG(x.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();class p{static phoneLength(r){return r.value.replace("+","").length>10||0===r.value.replace("+","").length?null:{length:{value:r.value}}}static inputLength(r){return 6===r.value.length||0===r.value.length?null:{length:{value:r.value}}}}function g(t,r){1&t&&(e.TgZ(0,"h2",5),e._uU(1,"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"),e.qZA())}function v(t,r){1&t&&(e.TgZ(0,"div",32),e._uU(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f "),e.qZA())}function y(t,r){1&t&&(e.TgZ(0,"div",32),e._uU(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e "),e.qZA())}function Z(t,r){1&t&&(e.TgZ(0,"div",32),e._uU(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 "),e.qZA())}function N(t,r){1&t&&(e.TgZ(0,"div",32),e._uU(1,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 11 \u0446\u0438\u0444\u0440 (\u0431\u0435\u0437 \u0443\u0447\u0435\u0442\u0430 '+') "),e.qZA())}function C(t,r){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Z,2,0,"div",11),e.YNc(2,N,2,0,"div",11),e.qZA()),2&t){const u=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==u.userPhone||null==u.userPhone.errors?null:u.userPhone.errors.required),e.xp6(1),e.Q6J("ngIf",null==u.userPhone||null==u.userPhone.errors?null:u.userPhone.errors.length)}}function A(t,r){1&t&&(e.TgZ(0,"div",32),e._uU(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 \u0441\u0442\u0440\u0430\u043d\u0443 "),e.qZA())}function T(t,r){1&t&&(e.TgZ(0,"div",32),e._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0438\u043d\u0434\u0435\u043a\u0441 "),e.qZA())}function O(t,r){1&t&&(e.TgZ(0,"div",32),e._uU(1," \u0418\u043d\u0434\u0435\u043a\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 "),e.qZA())}function b(t,r){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,T,2,0,"div",11),e.YNc(2,O,2,0,"div",11),e.qZA()),2&t){const u=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==u.index||null==u.index.errors?null:u.index.errors.required),e.xp6(1),e.Q6J("ngIf",null==u.index||null==u.index.errors?null:u.index.errors.length)}}function k(t,r){1&t&&(e.TgZ(0,"div",32),e._uU(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0430\u0434\u0440\u0435\u0441 "),e.qZA())}function q(t,r){1&t&&(e.TgZ(0,"span",33),e._uU(1,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."),e.qZA())}function I(t,r){if(1&t){const u=e.EpF();e.TgZ(0,"form",6)(1,"div",7)(2,"div",8)(3,"label",9),e._uU(4,"\u0418\u043c\u044f"),e.qZA(),e.TgZ(5,"input",10),e.NdJ("keydown",function(o){e.CHM(u);const s=e.oxw();return e.KtG(s.onlyLetters(o))}),e.qZA(),e.YNc(6,v,2,0,"div",11),e.qZA(),e.TgZ(7,"div",8)(8,"label",12),e._uU(9,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),e.qZA(),e.TgZ(10,"input",13),e.NdJ("keydown",function(o){e.CHM(u);const s=e.oxw();return e.KtG(s.onlyLetters(o))}),e.qZA(),e.YNc(11,y,2,0,"div",11),e.qZA(),e.TgZ(12,"div",8)(13,"label",14),e._uU(14,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),e.qZA(),e.TgZ(15,"input",15,16),e.NdJ("keydown",function(o){e.CHM(u);const s=e.MAs(16),a=e.oxw();return e.KtG(a.phoneValidator(o,s))}),e.qZA(),e.YNc(17,C,3,2,"div",17),e.qZA(),e.TgZ(18,"div",18)(19,"label",19),e._uU(20,"\u0421\u0442\u0440\u0430\u043d\u0430"),e.qZA(),e._UZ(21,"input",20),e.YNc(22,A,2,0,"div",11),e.qZA(),e.TgZ(23,"div",18)(24,"label",21),e._uU(25,"\u0418\u043d\u0434\u0435\u043a\u0441"),e.qZA(),e.TgZ(26,"input",22,23),e.NdJ("keydown",function(o){e.CHM(u);const s=e.MAs(27),a=e.oxw();return e.KtG(a.indexValidator(o,s))}),e.qZA(),e.YNc(28,b,3,2,"div",17),e.qZA(),e.TgZ(29,"div",24)(30,"label",25),e._uU(31,"\u0410\u0434\u0440\u0435\u0441"),e.qZA(),e.TgZ(32,"input",26),e.NdJ("keydown",function(o){e.CHM(u);const s=e.oxw();return e.KtG(s.addressValidator(o))}),e.qZA(),e.YNc(33,k,2,0,"div",11),e.qZA(),e.TgZ(34,"div",18)(35,"label",19),e._uU(36,"\u0422\u043e\u0432\u0430\u0440"),e.qZA(),e._UZ(37,"input",27),e.qZA(),e.TgZ(38,"div",18)(39,"label",21),e._uU(40,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u043a\u0430\u0437\u0443"),e.qZA(),e._UZ(41,"input",28),e.qZA()(),e.TgZ(42,"div",29)(43,"button",30),e.NdJ("click",function(){e.CHM(u);const o=e.oxw();return e.KtG(o.formValidators())}),e._uU(44," \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c "),e.qZA(),e.YNc(45,q,2,0,"span",31),e.qZA()()}if(2&t){const u=e.oxw();e.Q6J("formGroup",u.orderInputs),e.xp6(6),e.Q6J("ngIf",(null==u.firstName?null:u.firstName.invalid)&&((null==u.firstName?null:u.firstName.dirty)||(null==u.firstName?null:u.firstName.touched))),e.xp6(5),e.Q6J("ngIf",(null==u.lastName?null:u.lastName.invalid)&&((null==u.lastName?null:u.lastName.dirty)||(null==u.lastName?null:u.lastName.touched))),e.xp6(6),e.Q6J("ngIf",(null==u.userPhone?null:u.userPhone.invalid)&&((null==u.userPhone?null:u.userPhone.dirty)||(null==u.userPhone?null:u.userPhone.touched))),e.xp6(5),e.Q6J("ngIf",(null==u.country?null:u.country.invalid)&&((null==u.country?null:u.country.dirty)||(null==u.country?null:u.country.touched))),e.xp6(6),e.Q6J("ngIf",(null==u.index?null:u.index.invalid)&&((null==u.index?null:u.index.dirty)||(null==u.index?null:u.index.touched))),e.xp6(5),e.Q6J("ngIf",(null==u.address?null:u.address.invalid)&&((null==u.address?null:u.address.dirty)||(null==u.address?null:u.address.touched))),e.xp6(10),e.Q6J("disabled",u.btnDisabled),e.xp6(2),e.Q6J("ngIf",u.orderError)}}function w(t,r){1&t&&(e.TgZ(0,"h2",36),e._uU(1,"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437!"),e.qZA())}function E(t,r){if(1&t&&(e.TgZ(0,"div",34),e.YNc(1,w,2,0,"h2",35),e.qZA()),2&t){const u=e.oxw();e.xp6(1),e.Q6J("ngIf",!u.showForm)}}const J=[{path:"order",component:(()=>{class t{constructor(u,n,o){this.activatedRoute=u,this.fb=n,this.orderService=o,this.product="",this.orderError=!1,this.showForm=!0,this.btnDisabled=!1,this.orderCrate$=null,this.firstNameValue="",this.orderInputs=this.fb.group({firstName:[this.firstNameValue,{validators:[i.kI.required],updateOn:"blur"}],lastName:["",{validators:[i.kI.required],updateOn:"blur"}],userPhone:["",{validators:[i.kI.required,p.phoneLength],updateOn:"blur"}],country:["",{validators:[i.kI.required],updateOn:"blur"}],index:["",{validators:[i.kI.required,p.inputLength],updateOn:"blur"}],address:["",{validators:[i.kI.required],updateOn:"blur"}],product:[""],comment:[""]})}get firstName(){return this.orderInputs.get("firstName")}get lastName(){return this.orderInputs.get("lastName")}get userPhone(){return this.orderInputs.get("userPhone")}get country(){return this.orderInputs.get("country")}get index(){return this.orderInputs.get("index")}get address(){return this.orderInputs.get("address")}get comment(){return this.orderInputs.get("comment")}ngOnInit(){this.activatedRoute.queryParams.subscribe(u=>{u.product&&(this.product=u.product),this.orderInputs.patchValue({product:u.product})})}ngOnDestroy(){this.orderCrate$?.unsubscribe()}onlyLetters(u){u.key&&!u.key.match(/[A-Za-z\u0410-\u042f\u0430-\u044f]/)&&"Backspace"!==u.key&&u.preventDefault()}indexValidator(u,n){(u.key&&!u.key.match(/\d/)||n.value.length>5)&&"Backspace"!==u.key&&u.preventDefault()}phoneValidator(u,n){const o=n.value.replace("+","");(u.key&&!u.key.match(/[+\d]/)||o.length>10||"+"===u.key&&o.length>0)&&"Backspace"!==u.key&&u.preventDefault()}addressValidator(u){u.key&&!u.key.match(/^[A-Za-z\u0410-\u042f\u0430-\u044f\d\/\-\s]+$/)&&u.preventDefault()}formValidators(){!(this.firstName&&this.lastName&&this.userPhone&&this.country&&this.index&&this.product&&this.address)||this.firstName.invalid||this.lastName.invalid||this.userPhone.invalid||this.country.invalid||this.index.invalid||this.address.invalid?(this.firstName.value||this.firstName.markAsTouched(),this.lastName.value||this.lastName.markAsTouched(),this.userPhone.value||this.userPhone.markAsTouched(),this.country.value||this.country.markAsTouched(),this.index.value||this.index.markAsTouched(),this.address.value||this.address.markAsTouched()):this.createOrder()}createOrder(){let u={name:this.firstName.value,last_name:this.lastName?.value,phone:this.userPhone?.value,country:this.country?.value,zip:this.index?.value,product:this.orderInputs.get("product")?.value,address:this.address?.value};this.comment&&this.comment.value&&(u.comment=this.comment.value),this.btnDisabled=!0,this.orderCrate$=this.orderService.order(u).subscribe({next:n=>{this.btnDisabled=!1,1!==n.success||n.message?(setTimeout(()=>{this.orderError=!1},3e3),this.orderError=!0,this.showForm=!0):(this.orderError=!1,this.showForm=!1)},error:n=>{this.btnDisabled=!1,this.orderError=!0}})}}return t.\u0275fac=function(u){return new(u||t)(e.Y36(d.gz),e.Y36(i.qu),e.Y36(f))},t.\u0275cmp=e.Xpm({type:t,selectors:[["order"]],features:[e._Bn([f])],decls:5,vars:3,consts:[[1,"order","py-4"],[1,"container","d-flex","flex-column","align-items-center"],["class","text-center mb-5",4,"ngIf"],["class","col-lg-6 mx-auto d-flex flex-column justify-content-center justify-content-md-start",3,"formGroup",4,"ngIf"],["class","thanks d-flex align-items-center justify-content-center ",4,"ngIf"],[1,"text-center","mb-5"],[1,"col-lg-6","mx-auto","d-flex","flex-column","justify-content-center","justify-content-md-start",3,"formGroup"],[1,"row","g-3"],[1,"col-lg-4","col-8","mx-auto"],["for","firstName",1,"form-label"],["type","text","name","firstName","id","firstName","formControlName","firstName",1,"form-control","form-input","form-input",3,"keydown"],["class","error-input text-danger",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","name","lastName","id","lastName","formControlName","lastName",1,"form-control","form-input",3,"keydown"],["for","phone",1,"form-label"],["type","text","name","phone","id","phone","formControlName","userPhone",1,"form-control","form-input",3,"keydown"],["userPhoneEl",""],[4,"ngIf"],[1,"col-lg-6","col-8","mx-auto"],["for","country",1,"form-label"],["type","text","name","country","id","country","formControlName","country",1,"form-control","form-input"],["for","index",1,"form-label"],["type","text","name","index","id","index","formControlName","index",1,"form-control","form-input",3,"keydown"],["indexEl",""],[1,"col-lg-12","col-8","mx-auto"],["for","address",1,"form-label"],["type","text","name","address","id","address","formControlName","address",1,"form-control","form-input",3,"keydown"],["type","text","name","product","id","product","formControlName","product","readonly","",1,"form-control","form-input"],["type","text","name","comment","id","comment","formControlName","comment",1,"form-control","form-input"],[1,"mt-4","d-flex","flex-sm-row","flex-column","justify-content-start","align-items-center"],["type","button",1,"btn","btn-primary","form-btn","px-4","mb-sm-0","mb-3",3,"disabled","click"],["class","px-4 col-xs-3 text-danger",4,"ngIf"],[1,"error-input","text-danger"],[1,"px-4","col-xs-3","text-danger"],[1,"thanks","d-flex","align-items-center","justify-content-center"],["class","h1 text-primary",4,"ngIf"],[1,"h1","text-primary"]],template:function(u,n){1&u&&(e.TgZ(0,"section",0)(1,"div",1),e.YNc(2,g,2,0,"h2",2),e.YNc(3,I,46,9,"form",3),e.YNc(4,E,2,1,"div",4),e.qZA()()),2&u&&(e.xp6(2),e.Q6J("ngIf",n.showForm),e.xp6(1),e.Q6J("ngIf",n.showForm),e.xp6(1),e.Q6J("ngIf",!n.showForm))},dependencies:[m.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".ng-touched.ng-invalid[_ngcontent-%COMP%]{border-color:red}.thanks[_ngcontent-%COMP%]{min-height:50vh}"]}),t})(),title:"Order Tea"}];let h=(()=>{class t{}return t.\u0275fac=function(u){return new(u||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(J),d.Bz]}),t})();var P=l(4466);let U=(()=>{class t{}return t.\u0275fac=function(u){return new(u||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,h,P.m,i.UX,d.Bz,h]}),t})()}}]);